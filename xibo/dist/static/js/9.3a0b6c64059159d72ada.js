webpackJsonp([9],{EJSq:function(e,r){},oGYk:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={name:"addUser",data:function(){return{roleName:!1,roleData:"",ruleForm2:{mobilePhone:"",username:"",roleId:"",status:"",sex:"1",age:0,checkPass:"",name:"",avatar:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:11,message:"长度在 3 到 11 个字符",trigger:"blur"}]}}},methods:{handleAvatarSuccess:function(e,r){this.ruleForm2.avatar=e.data[0]},beforeAvatarUpload:function(e){var r="image/jpeg"===e.type,t="image/png"===e.type,a=e.size/1024/1024<2;return r||t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&r||t},getList:function(){var e=this;this.$axios.post("/permissions/getRoleList").then(function(r){console.log(r),e.roleData=r.data.rows;var t=e.$route.query.userId;t||(t=e.$store.getters.info.uid),e.$axios.post("/user/getUserInforId",{id:t}).then(function(r){console.log(r),r.data.password="","1"===r.data.status?r.data.status=!0:r.data.status=!1,e.ruleForm2=r.data,e.roleName=!0;for(var a=0;a<e.roleData.length;a++)"超级管理员"===e.$store.getters.info.role&&e.$store.getters.info.uid!==t&&(e.roleName=!1);return!1}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},submitForm:function(e){var r=this,t=this;console.log(t.ruleForm2),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r.$axios.post("/user/editUserInfo",t.ruleForm2).then(function(e){t.$message({showClose:!0,message:e.data.message,type:"success"}),console.log(t.ruleForm2)}).catch(function(e){console.log(e)})})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getList()}},o={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card"},[e._m(0),e._v(" "),t("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.username,callback:function(r){e.$set(e.ruleForm2,"username",r)},expression:"ruleForm2.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色"}},[e.roleName?t("el-select",{attrs:{disabled:"",placeholder:"请选择等级"},model:{value:e.ruleForm2.roleId,callback:function(r){e.$set(e.ruleForm2,"roleId",r)},expression:"ruleForm2.roleId"}},e._l(e.roleData,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):t("el-select",{attrs:{placeholder:"请选择等级"},model:{value:e.ruleForm2.roleId,callback:function(r){e.$set(e.ruleForm2,"roleId",r)},expression:"ruleForm2.roleId"}},e._l(e.roleData,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.disabled}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.name,callback:function(r){e.$set(e.ruleForm2,"name",r)},expression:"ruleForm2.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.ruleForm2.sex,callback:function(r){e.$set(e.ruleForm2,"sex",r)},expression:"ruleForm2.sex"}},[t("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"年龄",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.age,callback:function(r){e.$set(e.ruleForm2,"age",r)},expression:"ruleForm2.age"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"mobilePhone"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.mobilePhone,callback:function(r){e.$set(e.ruleForm2,"mobilePhone",r)},expression:"ruleForm2.mobilePhone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否启用"}},[t("el-switch",{model:{value:e.ruleForm2.status,callback:function(r){e.$set(e.ruleForm2,"status",r)},expression:"ruleForm2.status"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"头像上传"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/editor/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm2.avatar?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm2.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm2")}}},[e._v("修改")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("p",{staticClass:"title"},[r("i",{staticClass:"fa fa-th-large fa-lg"}),this._v("个人资料")])}]};var l=t("VU/8")(a,o,!1,function(e){t("EJSq")},"data-v-564bf796",null);r.default=l.exports}});
//# sourceMappingURL=9.3a0b6c64059159d72ada.js.map